/* =========================================================
   Dashboard CSS (Inter + system-ui stack) 
   - Cleaned, organized, and font-routed via variables
   ========================================================= */

/* ---------------------- Web Fonts ----------------------- */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300..900&display=swap");

/* =========================================================
   Theme Tokens
   ========================================================= */
:root {
  /* Colors (light defaults) */
  --bg: #ffffff;

  /* Elevation */
  --elev-sm: 0 2px 6px rgba(0,0,0,.08);
  --elev-md: 0 8px 24px rgba(0,0,0,.14);

  /* Radii / spacing */
  --radius: 14px;
  --gap: 16px;

  /* Shadows */
  --shadow: 0 1px 2px rgba(0,0,0,.05), 0 6px 24px rgba(0,0,0,.06);

  /* Sidebar sizes */
  --sidebar-collapsed: 68px;
  --sidebar-expanded: 220px;

  /* Typography (Inter + system-ui fallback) */
  --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --font-body: var(--font-sans);
  --font-ui:   var(--font-sans);
  --font-nav:  var(--font-sans);

  /* Sidebar font controls */
  --side-font-family: var(--font-sans);
  --side-font-size: 18px;
  --side-icon-size: 24px;

  /* Wallpaper defaults */
  --wall-url: url("");
  --wall-tint: rgba(255,255,255,0.2);
  --wall-size: 900px auto;

  /* Nav sizes */
  --nav-crumb-size: 0.95rem;
  --nav-title-size: 1.18rem;
  --nav-ui-size: 0.95rem;

  /* You likely define these elsewhere; keep as hooks: */
  /* --text, --muted, --panel, --stroke, --accent, --primary-300, --primary-400 */
}

.dark, .theme-dark {
  --elev-sm: 0 2px 10px rgba(0,0,0,.35);
  --elev-md: 0 12px 30px rgba(0,0,0,.50);

  --wall-url: url("");
  --wall-tint: rgba(0,0,0,0.4);
}

/* =========================================================
   Base
   ========================================================= */
* { box-sizing: border-box; }
html, body, #app { height: 100%; }
html, body, #root, #app { min-height: 100%; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 14px/1.4 var(--font-body);
  transition: background-color .3s ease, color .3s ease;
  position: relative;
  background: transparent !important; /* wallpaper sits behind */
}

a { text-decoration: none; color: inherit; }

/* Wallpaper behind the app */
body::before{
  content: "";
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background-image:
    linear-gradient(var(--wall-tint), var(--wall-tint)),
    var(--wall-url);
  background-size: auto, var(--wall-size);
  background-repeat: no-repeat, repeat;
  background-position: center top, center top;
  background-attachment: scroll, scroll;
}
#root, #app, #main{
  position: relative;
  z-index: 1;
  background: transparent !important;
}

/* Gradient frame wrapper */
.outer-box {
  background: linear-gradient(135deg, rgba(154,154,154,.3), rgba(154,154,154,.3));
  border-radius: 12px;
  padding: 16px;
}
.dark .outer-box {
  background: linear-gradient(135deg, rgba(221,221,221,.3), rgba(221,221,221,.3));
}

/* =========================================================
   Sidebar
   ========================================================= */
#sidebar {
  position: fixed;
  inset: 0 auto 0 0;
  width: var(--sidebar-collapsed);
  background: var(--sidebar-bg, var(--panel));
  border-right: 1px solid var(--stroke);
  box-shadow: var(--shadow);
  overflow: hidden;
  transition: width .25s ease, background-color .3s ease, border-color .3s ease;
  z-index: 10;
  font-family: var(--side-font-family);
  font-size: var(--side-font-size);
}
#sidebar:hover { width: var(--sidebar-expanded); }

/* Hover tints */
:root{
  --side-hover-shadow: 0 10px 18px rgba(105,193,215,.6);
  --side-hover-bg: rgba(174,175,233,.4);
}
.dark, .theme-dark {
  --side-hover-shadow: 0 12px 30px rgba(143,221,240,.4);
  --side-hover-bg: rgba(166,167,238,.4);
}

/* Brand */
#sidebar .brand {
  display: flex; align-items: center; gap: 12px;
  height: 64px;
  margin: 12px; padding: 0 12px;
  background: transparent; border: none; border-radius: var(--radius);
  transition: background-color .3s ease, box-shadow .3s ease;
}
#sidebar .brand:hover { background: var(--side-hover-bg); box-shadow: var(--side-hover-shadow); }

#sidebar .brand .logo {
  width: 42px; height: 42px; /* larger, cleaner */
  background: transparent;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  color: var(--text); font-weight: 600; font-size: 14px;
}
#sidebar .brand .logo img { width: 100%; height: 100%; object-fit: contain; }

#sidebar .brand .brand-text {
  display: flex; flex-direction: column; align-items: flex-start;
  line-height: 1.2; max-width: 0; opacity: 0; overflow: hidden;
  transform: translateX(-6px);
  transition: max-width .25s ease, opacity .2s ease, transform .2s ease;
}
#sidebar .brand .brand-text .line1,
#sidebar .brand .brand-text .line2 {
  font-weight: 600;
  font-size: var(--side-font-size);
  color: var(--text);
}
#sidebar:hover .brand .brand-text { max-width: 120px; opacity: 1; transform: translateX(0); }

/* 0*/
#sidebar nav ul {
  list-style: none; display: grid; gap: 6px; margin: 0; padding: 8px;
}
#sidebar .nav-row {
  display: flex; align-items: center; gap: 12px;
  height: 44px; padding: 0 12px; margin: 0 8px;
  background: transparent; border: none; border-radius: 10px;
  transition: background-color .3s ease, box-shadow .3s ease, transform .2s ease;
  cursor: pointer;
}
#sidebar .nav-row:hover {
  background: var(--side-hover-bg);
  box-shadow: var(--side-hover-shadow);
  transform: translateY(-1px);
}
.icon-box {
  width: 20px; height: 20px;
  background: var(--stroke);
  border-radius: 4px; flex: 0 0 auto; transition: background-color .3s ease;
}
#sidebar .label {
  max-width: 0; opacity: 0; overflow: hidden; white-space: nowrap;
  transform: translateX(-6px);
  transition: max-width .25s ease, opacity .2s ease, transform .2s ease;
  font-weight: 500; font-size: var(--side-font-size);
}
#sidebar:hover .label { max-width: 180px; opacity: 1; transform: translateX(0); }

/* Footer */
#sidebar .sidebar-footer { position: absolute; bottom: 12px; left: 0; right: 0; padding: 8px; }
#sidebar .sidebar-footer .nav-row { margin: 0 8px; }

/* =========================================================
   Main & Topbar
   ========================================================= */
#main {
  margin-left: var(--sidebar-collapsed);
  padding: 20px;
  min-height: 100vh;
  transition: margin-left .25s ease;
  font-family: var(--font-body);
}
#sidebar:hover ~ #main { margin-left: var(--sidebar-expanded); }

#top{
  position: sticky; top: 0; z-index: 40;
  display: flex; align-items: center; justify-content: space-between; gap: var(--gap);
  margin-bottom: 4px;
  background: linear-gradient(135deg, rgba(111, 111, 111, 0.408), rgba(188, 188, 188, 0.479));
  backdrop-filter: blur(10px);
  border-radius: 14px; padding: 12px 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,.06);
  font-family: var(--font-nav);
  color: #000000;
}
.dark #top{
  background: linear-gradient(135deg, rgba(221, 221, 221, 0.393), rgba(206, 206, 206, 0.629));
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
}

.breadcrumbs {
  display: flex; align-items: center; gap: 8px;
  color: var(--muted);
  font-family: var(--font-nav);
  font-weight: 700;
  font-size: var(--nav-title-size);
  letter-spacing: .1px;
}
.dark #top .breadcrumbs { color: #e7eef7; }

.breadcrumbs .sep { color: var(--muted); }
.top-actions { display: flex; align-items: center; gap: 10px; }

/* Search */
.search {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 6px 8px;
  background: var(--panel);
  border: 1px solid var(--stroke);
  border-radius: 999px;
  transition: background-color .3s ease, border-color .3s ease;
  font-family: var(--font-ui);
}
.search input {
  min-width: 200px; color: var(--text); background: transparent; border: 0; outline: 0;
  transition: color .3s ease; font-family: var(--font-ui); font-size: var(--nav-ui-size); font-weight: 500;
}
.search input::placeholder { color: var(--muted); transition: color .3s ease; }

.icon-btn {
  width: 28px; height: 28px; background: transparent;
  border: 1px solid var(--stroke); border-radius: 50%;
  transition: border-color .3s ease;
}

/* Theme toggle */
.theme-toggle, .toggle {
  position: relative; width: 52px; height: 28px;
  background: var(--panel); border: 1px solid var(--stroke);
  border-radius: 999px; cursor: pointer; transition: all .3s ease; outline: none;
}
.theme-toggle:hover, .toggle:hover { transform: scale(1.05); border-color: var(--muted); }
.theme-toggle:hover .knob, .toggle:hover .knob { box-shadow: 0 4px 8px rgba(0,0,0,.15); }
.theme-toggle:active, .toggle:active { transform: scale(.95); }

.toggle {
  padding: 2px; box-shadow: var(--shadow);
  background: #16181d;
}
.toggle .knob {
  position: absolute; top: 2px; left: 2px; width: 22px; height: 22px;
  border-radius: 50%; background: #f5f7fb; transform: translateX(0);
  transition: transform .25s ease, background-color .3s ease, box-shadow .2s ease;
}
.toggle[aria-pressed="true"] { background: #eaeaea; }
.toggle[aria-pressed="true"] .knob { background: #16181d; transform: translateX(24px); }

/* =========================================================
   Category Scroll / Strip
   ========================================================= */
.category-scroll {
  display: grid; grid-template-columns: 40px 1fr 40px;
  align-items: center; gap: 12px; margin: 4px 0 8px; width: 100%;
  font-family: var(--font-body);

}
.scroll-left, .scroll-right {
  width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
  cursor: pointer; background: var(--panel); border: 1px solid var(--stroke);
  border-radius: 50%; transition: all .3s ease; font-size: 14px; color: var(--text);
}
.scroll-left:hover, .scroll-right:hover { background: var(--muted); color: var(--panel); transform: scale(1.1); }
.scroll-left:active, .scroll-right:active { transform: scale(.95); }

.category-scroll .categories {
  display: grid; grid-template-columns: repeat(6, 1fr);
  gap: 12px; width: 100%; overflow: hidden;
}
.category-scroll .category {
  display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 10px;
  width: 100%; height: 70px; padding: 8px 4px;
  background: linear-gradient(135deg, rgba(73, 74, 148, 0.9), rgba(56,150,174,0.9)) !important;
  border: 1px solid var(--stroke); border-radius: 7px;
  transition: all .3s ease; color: var(--cat-icon-color, var(--text)); box-sizing: border-box; text-decoration: none;
  font-family: var(--font-body); font-weight: 600;
}
.category-scroll .category:hover {
  transform: translateY(-2px);
  box-shadow: var(--hover-shadow, 0 8px 24px rgba(2,6,23,.12));
  border-color: var(--primary-300, var(--accent, #3b82f6));
}
.category-scroll .category-icon {
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  width: 32px; height: 32px;
}
.category-scroll .category-label {
  font-size: 14px; font-weight: 600; text-align: center; line-height: 1.2;
  transition: color .3s ease; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%;
  color: var(--cat-icon-color, var(--text));
}

/* Category strip (alt) */
.category-strip {
  display: grid; grid-template-columns: 32px 1fr 32px;
  align-items: center; gap: 8px; margin: 10px 0 18px;
  font-family: var(--font-body);
}
.nav-btn {
  width: 32px; height: 32px; line-height: 30px; text-align: center; cursor: default;
  background: var(--panel); border: 1px solid var(--stroke); border-radius: 50%;
  transition: background-color .3s ease, border-color .3s ease;
}
.categories { display: flex; gap: 10px; overflow: hidden; justify-content: center; align-items: center; width: 100%; }
.category {
  display: inline-flex; align-items: center; gap: 8px;
  min-width: 170px; height: 40px; padding: 8px 12px;
  background: var(--panel); border: 1px solid var(--stroke); border-radius: 2px;
  transition: background-color .3s ease, border-color .3s ease;
}
.category-icon {
  width: 22px; height: 22px; color: var(--cat-icon-color, #000000);
  border: 0 dashed var(--stroke); border-radius: 6px; transition: border-color .3s ease;
}
.category-label { white-space: nowrap; }

/* =========================================================
   Cards (generic)
   ========================================================= */
.card {
  background: var(--panel);
  border: 1px solid var(--stroke);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  transition: background-color .3s ease, border-color .3s ease;
  font-family: var(--font-body);
}

/* Greeting */
.greet-card {
  width: min(420px, 100%);
  padding: 10px;
  margin-bottom: 12px;
}
.greet-card h3 { margin: 0 0 6px; font-weight: 600; transition: color .3s ease; }
.greet-card p  { margin: 0; color: black; transition: color .3s ease; }

/* Charts container */
.charts-card {
  width: 100%; max-width: none; margin-inline: 0; padding: 12px; margin-bottom: 14px;
}
.charts-card .card-tools {
  display: flex; align-items: center; justify-content: flex-end; gap: 8px; margin-bottom: 10px;
}
.chart-grid {
  display: grid; grid-template-columns: minmax(0, .75fr) minmax(0, 1fr);
  gap: 16px; align-items: stretch; width: 100%;
  margin-bottom: 12px; /* Space between charts and trend card */
}
.chart-grid > * { height: 100%; min-width: 0; }
.chart-placeholder {
  display: grid; place-items: center; height: 220px; color: var(--muted);
  border: 1px dashed var(--stroke); border-radius: 12px;
  transition: color .3s ease, border-color .3s ease;
}

/* Date input */
.date-input {
  padding: 6px 10px; color: var(--text);
  background: var(--panel); border: 1px solid var(--stroke); border-radius: 10px;
  transition: color .3s ease, background-color .3s ease, border-color .3s ease;
  font-family: var(--font-ui);
}

/* =========================================================
   Risk Card
   ========================================================= */
.risk-card {
  font-size: 20px; height: 100%;
  display: flex; flex-direction: column;
  padding: 14px; background: var(--panel); border: 1px solid var(--stroke);
  border-radius: var(--radius); box-shadow: var(--shadow);
  transition: background-color .3s ease, border-color .3s ease;
  min-width: 0; width: 100%; font-family: var(--font-body);
}
.risk-card h4 { margin: 0 0 12px; font-weight: 600; transition: color .3s ease; }
.risk-list { list-style: none; display: grid; gap: 14px; margin: 0; padding: 0; width: 100%; }
.risk-row { display: grid; gap: 6px; width: 100%; }
.risk-name { font-size: 14px; transition: color .3s ease; }
.risk-meter {
  width: 420px; height: 12px; background: rgba(0,0,0,.08);
  border-radius: 999px; overflow: hidden; transition: background-color .3s ease;
}
.theme-dark .risk-meter { background: rgba(255,255,255,.10); }
.risk-fill {
  display: block;
  width: calc(var(--risk-step, 0) * 16.6667%);
  max-width: 100%; height: 100%;
  background: var(--risk-color, #d1d5db); border-radius: inherit;
  transition: width .35s ease;
}
.risk-row[data-level="low1"]  { --risk-step: 1; --risk-color: #22c55e; }
.risk-row[data-level="low2"]  { --risk-step: 2; --risk-color: #22c55e; }
.risk-row[data-level="mid1"]  { --risk-step: 3; --risk-color: #f59e0b; }
.risk-row[data-level="mid2"]  { --risk-step: 4; --risk-color: #f59e0b; }
.risk-row[data-level="high1"] { --risk-step: 5; --risk-color: #ef4444; }
.risk-row[data-level="high2"] { --risk-step: 6; --risk-color: #ef4444; }
.risk-skeleton {
  display: grid; place-items: center; height: 140px; color: var(--muted);
  border: 1px dashed var(--stroke); border-radius: 12px;
  transition: color .3s ease, border-color .3s ease;
}
.risk-note { margin-top: 8px; font-size: 12px; color: var(--muted); transition: color .3s ease; }

/* =========================================================
   Pie Card
   ========================================================= */
.pie-card {
  font-size: 20px; align-items: center; height: 100%;
  display: flex; flex-direction: column; min-height: 260px; padding: 14px;
  background: var(--panel); border: 1px solid var(--stroke); border-radius: var(--radius);
  box-shadow: var(--shadow); transition: background-color .3s ease, border-color .3s ease;
  font-family: var(--font-body);
}
.pie-card h4 { margin: 0 0 12px; font-weight: 600; transition: color .3s ease; }
.pie-layout {
  flex: 1; display: grid; grid-template-columns: 260px 1fr; align-items: center; gap: 16px; min-height: 220px;
}
.donut { width: 220px; height: 220px; color: var(--text); transition: color .3s ease; }
.pie-legend {
  list-style: none; display: grid; grid-template-columns: repeat(2, minmax(140px, 1fr));
  gap: 8px 16px; margin: 0; padding: 0; font-family: var(--font-ui);
}
.legend-row {
  display: grid; grid-template-columns: 12px 1fr auto; align-items: center; gap: 8px;
}
.dot { width: 12px; height: 12px; border-radius: 50%; }
.legend-name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; transition: color .3s ease; }
.legend-pct { color: var(--muted); font-variant-numeric: tabular-nums; transition: color .3s ease; }

/* =========================================================
   Line Chart Card
   ========================================================= */
.line-card { width: 75%; max-width: none; padding: 12px; font-family: var(--font-body); }
.line-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.line-top h4 { margin: 0; font-weight: 600; font-size: 18px; transition: color .3s ease; }

.select-like { position: relative; display: inline-block; }
.select-like select {
  appearance: none; padding: 6px 28px 6px 12px;
  font-size: 14px; font-weight: 500; border-radius: 10px; border: none; cursor: pointer; outline: none;
  transition: background .3s ease, color .3s ease; font-family: var(--font-ui);
}
.select-like select { background: linear-gradient(135deg,#497ac9, #8bddfb); color: #000; }
.dark .select-like select { background: linear-gradient(135deg,#29559b, #8bddfb); color: #050505; }
.select-like .caret {
  position: absolute; top: 50%; right: 10px; transform: translateY(-50%);
  font-size: 12px; color: #fff; pointer-events: none; transition: color .3s ease;
}
.dark .select-like .caret { color: #fff; }

.line-path { stroke-linecap: round; stroke-linejoin: round; }
.line-wrap { position: relative; height: 320px; }
.line-svg { width: 100%; height: 100%; }
.line-path { stroke: currentColor; stroke-width: 3; color: #3b82f6; }
.theme-dark .line-path { color: #60a5fa; }
.line-dot { fill: var(--panel); stroke: #222; stroke-width: 2; }
.theme-dark .line-dot { stroke: #eaeaea; }
.line-xlab, .line-ylab { fill: var(--muted); font-size: 12px; transition: fill .3s ease; }
.grid-line { stroke: currentColor; opacity: .06; transition: stroke .3s ease; }
.line-tooltip {
  position: absolute; z-index: 2; transform: translate(-50%, -16px);
  padding: 8px 10px; color: #fff; background: #4b5563; border-radius: 10px; box-shadow: var(--shadow);
  font-size: 12px; pointer-events: none; white-space: nowrap; font-family: var(--font-ui);
}
.line-tooltip3{ font-size: 22px; }

/* Trend line (bottom wide) */
.trend-card { width: 75%; max-width: none; padding: 12px; font-family: var(--font-body); }
.trend-card .card-tools { display: flex; justify-content: flex-end; margin-bottom: 10px; }
.chart-big {
  display: grid; place-items: center; height: 300px; color: var(--muted);
  border: 1px dashed var(--stroke); border-radius: 12px;
  transition: color .3s ease, border-color .3s ease;
}
 
/* Gradient border container for trend area */
.trend-container {
  display: inline-block; margin-top: 24px; padding: 12px; border-radius: 12px;
  background: linear-gradient(135deg, rgba(154,154,154,.3), rgba(154,154,154,.3));
}
.trend-container .trend-card {
  background: #fff; border-radius: 10px; margin: 0; width: 100%; height: 100%; box-sizing: border-box;
}
.dark .trend-container { background: linear-gradient(135deg, rgba(221,221,221,.3), rgba(221,221,221,.3)); }
.dark .trend-container .trend-card { background: #1a1a1a; }

/* =========================================================
   Hover / Focus / Motion
   ========================================================= */
.outer-box .card,
.trend-container .card,
.risk-card,
.pie-card,
.greet-card,
.dashboard .card,
.top-sites-card,
.category-pie-card,
.trend-line-card,
.mini-stats-card {
  box-shadow: var(--elev-sm);
  transition:
    transform .18s cubic-bezier(.2,.7,.2,1),
    box-shadow .18s ease,
    background-color .18s ease,
    border-color .18s ease;
  transform: translateZ(0);
  will-change: transform;
}
@media (hover:hover) and (pointer:fine){
  .greet-card:hover,
  .outer-box .card:hover,
  .trend-container .card:hover,
  .risk-card:hover,
  .pie-card:hover,
  .dashboard .card:hover,
  .top-sites-card:hover,
  .category-pie-card:hover,
  .trend-line-card:hover,
  .mini-stats-card:hover {
    transform: translate3d(0,-4px,0) scale(1.015);
    box-shadow: var(--elev-md);
  }
}
.greet-card:focus-within,
.outer-box .card:focus-within,
.trend-container .card:focus-within,
.risk-card:focus-within,
.pie-chart:focus-within,
.greet-card:focus-visible,
.outer-box .card:focus-visible,
.trend-container .card:focus-visible,
.risk-card:focus-visible,
.pie-card:focus-visible {
  transform: translate3d(0,-4px,0) scale(1.015);
  box-shadow: var(--elev-md);
  outline: none;
}
.greet-card:active,
.outer-box .card:active,
.trend-container .card:active,
.risk-card:active,
.pie-card:active {
  transform: translate3d(0,-1px,0) scale(1.005);
}
@media (prefers-reduced-motion: reduce){
  .greet-card,
  .outer-box .card,
  .trend-container .card,
  .risk-card,
  .pie-card { transition: none; }
}

/* Prevent clipping card shadows */
.outer-box, .trend-container { overflow: visible; }

/* Welcome card padding hook */
.card.welcome-card,
.panel.welcome-card { padding: var(--welcome-pad); }

/* =========================================================
   Spacing helpers
   ========================================================= */
.dashboard .category-scroll { 
  margin-top: 40px;
  margin-bottom: 40px; /* Space between category carousel and welcome card */
  padding-bottom: 0; 
}

main,
.dashboard,
.dashboard-content,
.main-content,
.page-content { padding-top: calc(var(--topbar-h) + var(--nav-gap)); }

.category-scroll,
.category-section {
  margin-top: var(--nav-gap);
  scroll-margin-top: calc(var(--topbar-h) + var(--nav-gap));
}

/* =========================================================
   Responsive
   ========================================================= */
@media (max-width: 900px) {
  .search input { min-width: 120px; }
  .category { min-width: 100px; }
  .chart-grid { grid-template-columns: 1fr; }
  .chart-big { height: 240px; }
  .chart-grid > * { min-height: auto; }
}
@media (min-width: 900px) {
  .chart-grid > * { min-height: 320px; }
}
